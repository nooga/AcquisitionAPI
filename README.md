# AirQuality Data Acquisition API (discussion)

## Challenges

- Sensors can have limited buffers and cannot store a lot of data in case of server downtime, some of them can store no data at all.
- Some sensors can be misconfigured or compromised and could pose risk of incidental or intentional DDoS.
- Sensor ability to transfer data securely and/or solve security challenges can be limited.
- Sensor location is a sensitive information.

**Our final design should address all of the above.**

## STANDARDS

### Pollutants and their measurement units

- Carbon Monoxide - Concentration, unit: **mg/m³**
- Lead - Concentration, unit: **µg/m³**
- Nitrogen Dioxide - Concentration, unit: **µg/m³**
- Ozone - Concentration, unit: **µg/m³**
- Particulate Matter (PM10) - Concentration, unit: **µg/m³**
- Particulate Matter (PM2.5) - Concentration, unit: **µg/m³**
- Sulfur Dioxide - Concentration, unit: **µg/m³**

## Protocol (to be selected)

- MQTT (ISO/IEC PRF 20922)
- HTTP(S)
- UDP

### HTTP Payload (to be selected)

- JSON (HTTP POST)
- BSON (HTTP POST)
- BINARY (HTTP POST)

### Sensor authentication and identification

#### Sensor Unique Identifier (SUID)

This identifier is generated by the manufacturer.
Manufacturer name in SUID should be used after prior contact with `suid@opensmog.org`.

**Lenght:** Maximum 255 ASCII chars.

- [NEWEST API VERSION SUPPORTED] - two digits (00-99) ex. `01`
- [MANUFACTURER NAME] - max 10 chars ex. `SONY`
- [MANUFACTURER UNIQUE NUMBER] - variable lenght

**Example SUID:** `01SONY000237987298374987`


### New sensor auto-registration

Desired scenario:

- Sensor is powered and connected to the internet.
- Device should use DHCP and start data acuisition.
- User goes to `sensor.opensmog.org`
- Enters the SUID (printed on package as well as o the device sticker). 
- User enters the address (or lat/lon) of sensor location.
- Device is ready.
